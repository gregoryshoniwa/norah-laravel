import{_ as m,c as l,o as i,a as s,w as u,v as g,b as f,F as c,r as h,t as r,d as p,e as d,n as v}from"./app-BhbFmzb5.js";/* empty css            */const b={name:"DashboardHome",data(){return{userName:"Loading...",userInitials:"",stats:{totalVolume:0,totalTransactions:0,systemCharges:0,merchantCharges:0},transactions:[],search:"",currentPage:1,totalPages:0,loading:!1,debounceTimer:null,currencies:["USD","ZWG","ZAR","BWP","EUR","GBP"],selectedCurrency:"USD"}},mounted(){const a=JSON.parse(localStorage.getItem("user"));a&&(this.userName=a.fullName,this.userInitials=`https://ui-avatars.com/api/?name=${encodeURIComponent(a.fullName)}&background=010647&color=fff`);const t=localStorage.getItem("authToken");if(t)d.defaults.headers.common.Authorization=`Bearer ${t}`;else{this.$router.push("/login");return}this.loadDashboardStats(),this.loadTransactions()},methods:{formatAmount(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.selectedCurrency}).format(a)},async loadDashboardStats(){try{const a=await d.get("/api/v1/dashboard/stats",{params:{currency:this.selectedCurrency}});a.data.success&&(this.stats=a.data.data)}catch(a){console.error("Error loading dashboard stats:",a),this.$swal.fire("Error!","Failed to load dashboard statistics","error")}},async loadTransactions(){this.loading=!0;try{const a=await d.get("/api/v1/dashboard/recent-transactions",{params:{search:this.search,page:this.currentPage,per_page:5,currency:this.selectedCurrency}});a.data.success&&(this.transactions=a.data.data.data,this.currentPage=a.data.data.current_page,this.totalPages=a.data.data.last_page)}catch(a){console.error("Error loading transactions:",a),this.$swal.fire("Error!","Failed to load transactions","error")}finally{this.loading=!1}},handleSearch(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.currentPage=1,this.loadTransactions()},500)},handlePageChange(a){this.currentPage=a,this.loadTransactions()}}},_={class:"dashboard-content"},y={class:"topbar"},C={class:"search-box"},P={class:"user-info"},T={class:"currency-selector"},S=["value"],D={class:"user"},N=["src"],k={class:"user-name"},A={class:"stats-grid"},I={class:"stat-card"},w={class:"stat-info"},E={class:"amount"},x={class:"stat-card"},U={class:"stat-info"},V={class:"amount"},B={class:"stat-card"},F={class:"stat-info"},L={class:"amount"},R={class:"stat-card"},G={class:"stat-info"},M={class:"amount"},z={class:"transactions-section"},H={class:"transactions-table"},O={key:0},W={key:1},Z={key:0,class:"pagination"},J=["disabled"],j={class:"page-info"},q=["disabled"];function K(a,t,Q,X,n,o){return i(),l("div",_,[s("div",y,[s("div",C,[t[6]||(t[6]=s("i",{class:"ri-search-line"},null,-1)),u(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.search=e),onInput:t[1]||(t[1]=(...e)=>o.handleSearch&&o.handleSearch(...e)),type:"text",placeholder:"Search transactions..."},null,544),[[g,n.search]])]),s("div",P,[s("div",T,[u(s("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedCurrency=e),onChange:t[3]||(t[3]=(...e)=>a.handleCurrencyChange&&a.handleCurrencyChange(...e))},[(i(!0),l(c,null,h(n.currencies,e=>(i(),l("option",{key:e,value:e},r(e),9,S))),128))],544),[[f,n.selectedCurrency]])]),t[7]||(t[7]=s("div",{class:"notifications"},[s("i",{class:"ri-notification-3-line"}),s("span",{class:"badge"},"3")],-1)),s("div",D,[s("img",{src:n.userInitials,alt:"User",class:"avatar"},null,8,N),s("span",k,r(n.userName),1)])])]),s("div",A,[s("div",I,[s("div",w,[t[8]||(t[8]=s("h3",null,"Total Volume",-1)),s("p",E,r(o.formatAmount(n.stats.totalVolume)),1)]),t[9]||(t[9]=s("div",{class:"stat-icon"},[s("i",{class:"ri-money-dollar-circle-line"})],-1))]),s("div",x,[s("div",U,[t[10]||(t[10]=s("h3",null,"# Transactions",-1)),s("p",V,r(n.stats.totalTransactions),1)]),t[11]||(t[11]=s("div",{class:"stat-icon"},[s("i",{class:"ri-exchange-funds-line"})],-1))]),s("div",B,[s("div",F,[t[12]||(t[12]=s("h3",null,"System Charges",-1)),s("p",L,r(o.formatAmount(n.stats.systemCharges)),1)]),t[13]||(t[13]=s("div",{class:"stat-icon"},[s("i",{class:"ri-line-chart-line"})],-1))]),s("div",R,[s("div",G,[t[14]||(t[14]=s("h3",null,"Profit / Charges",-1)),s("p",M,r(o.formatAmount(n.stats.merchantCharges)),1)]),t[15]||(t[15]=s("div",{class:"stat-icon"},[s("i",{class:"ri-user-line"})],-1))])]),s("div",z,[t[18]||(t[18]=s("div",{class:"section-header"},[s("h2",null,"Recent Transactions"),s("button",{class:"btn-view-all"},"View All")],-1)),s("div",H,[s("table",null,[t[17]||(t[17]=s("thead",null,[s("tr",null,[s("th",null,"Tran ID"),s("th",null,"Total"),s("th",null,"Amount"),s("th",null,"Charge"),s("th",null,"Type"),s("th",null,"Status"),s("th",null,"Date")])],-1)),n.loading?(i(),l("tbody",W,t[16]||(t[16]=[s("tr",null,[s("td",{colspan:"6",class:"text-center"},"Loading...")],-1)]))):(i(),l("tbody",O,[(i(!0),l(c,null,h(n.transactions,e=>(i(),l("tr",{key:e.id},[s("td",null,"#"+r(e.id),1),s("td",null,r(o.formatAmount(Number(e.amount)+Number(e.charge))),1),s("td",null,r(o.formatAmount(e.amount)),1),s("td",null,r(o.formatAmount(e.charge)),1),s("td",null,r(e.type),1),s("td",null,[s("span",{class:v(["status",e.status==="COMPLETED"?"success":e.status==="PENDING"?"pending":"failed"])},r(e.status),3)]),s("td",null,r(new Date(e.created_at).toLocaleString()),1)]))),128))]))])]),n.totalPages>1?(i(),l("div",Z,[s("button",{disabled:n.currentPage===1,onClick:t[4]||(t[4]=e=>o.handlePageChange(n.currentPage-1)),class:"pagination-btn"}," Previous ",8,J),s("span",j,"Page "+r(n.currentPage)+" of "+r(n.totalPages),1),s("button",{disabled:n.currentPage===n.totalPages,onClick:t[5]||(t[5]=e=>o.handlePageChange(n.currentPage+1)),class:"pagination-btn"}," Next ",8,q)])):p("",!0)])])}const ss=m(b,[["render",K],["__scopeId","data-v-58d1b9ab"]]);export{ss as default};
